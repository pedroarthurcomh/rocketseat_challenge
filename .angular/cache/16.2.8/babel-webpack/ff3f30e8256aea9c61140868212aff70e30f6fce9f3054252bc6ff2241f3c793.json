{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CartComponent = class CartComponent {\n  constructor(product_service) {\n    this.product_service = product_service;\n    this.products_price = '0';\n    this.total_price = 0;\n  }\n  ngOnInit() {\n    if (localStorage.getItem('cart')) {\n      let cartJSON = localStorage.getItem('cart');\n      let cart = JSON.parse(cartJSON);\n      this.cart_items = cart;\n    } else {\n      this.cart_items = undefined;\n    }\n    this.calculate_products_price();\n  }\n  remove_item(id) {\n    let cart_exist = this.cart_items;\n    for (let item of cart_exist) {\n      if (item.id == id) {\n        this.cart_items = cart_exist.filter(item => item.id !== id);\n      }\n    }\n    localStorage.setItem('cart', JSON.stringify(this.cart_items));\n    this.calculate_products_price();\n    this.product_service.item_added$.emit(1);\n  }\n  calculate_products_price() {\n    let price = 0;\n    for (let item of this.cart_items) {\n      price += item.price_in_cents * item.quantity;\n    }\n    price = price / 100;\n    this.products_price = `R$ ${price.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })}`;\n    if (this.products_price != 'R$ 0,00') {\n      let total = price + 40;\n      this.total_price = `R$ ${total.toLocaleString('pt-BR', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      })}`;\n    } else {\n      this.total_price = 'R$ 0,00';\n    }\n  }\n  price(initial_price) {\n    var price = initial_price / 100;\n    return `R$ ${price.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })}`;\n  }\n};\nCartComponent = __decorate([Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})], CartComponent);","map":{"version":3,"names":["Component","CartComponent","constructor","product_service","products_price","total_price","ngOnInit","localStorage","getItem","cartJSON","cart","JSON","parse","cart_items","undefined","calculate_products_price","remove_item","id","cart_exist","item","filter","setItem","stringify","item_added$","emit","price","price_in_cents","quantity","toLocaleString","minimumFractionDigits","maximumFractionDigits","total","initial_price","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/pedro/Documentos/_personal/rocketseat_challenge/src/app/components/cart/cart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ProductsService } from 'src/app/services/products.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit {\n  cart_items: any;\n  products_price: string = '0';\n  total_price: any = 0;\n\n  constructor(private product_service: ProductsService) {}\n\n  ngOnInit(): void {\n    if(localStorage.getItem('cart')){\n      let cartJSON: any = localStorage.getItem('cart')\n      let cart = JSON.parse(cartJSON)\n      this.cart_items = cart\n    } else {this.cart_items = undefined}\n\n    this.calculate_products_price()\n  }\n\n  remove_item(id: any){\n    let cart_exist = this.cart_items\n\n    for(let item of cart_exist){\n      if(item.id == id){\n        this.cart_items = cart_exist.filter((item: any) => item.id !== id);\n      }\n    }\n    localStorage.setItem('cart', JSON.stringify(this.cart_items))\n\n    this.calculate_products_price()\n    this.product_service.item_added$.emit(1)\n  }\n\n  calculate_products_price(){\n    let price = 0\n    for(let item of this.cart_items){\n      price += item.price_in_cents*item.quantity\n    }\n    price = price/100\n    this.products_price = `R$ ${price.toLocaleString('pt-BR',{\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })}`\n    if(this.products_price != 'R$ 0,00'){\n      let total: any = price + 40\n      this.total_price = `R$ ${total.toLocaleString('pt-BR',{\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      })}`\n    } else {\n      this.total_price = 'R$ 0,00'\n    }\n  }\n\n\n  price(initial_price: number){\n    var price = initial_price/100\n    return `R$ ${price.toLocaleString('pt-BR', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })}`\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAQ1C,WAAMC,aAAa,GAAnB,MAAMA,aAAa;EAKxBC,YAAoBC,eAAgC;IAAhC,KAAAA,eAAe,GAAfA,eAAe;IAHnC,KAAAC,cAAc,GAAW,GAAG;IAC5B,KAAAC,WAAW,GAAQ,CAAC;EAEmC;EAEvDC,QAAQA,CAAA;IACN,IAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAC;MAC9B,IAAIC,QAAQ,GAAQF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAChD,IAAIE,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,QAAQ,CAAC;MAC/B,IAAI,CAACI,UAAU,GAAGH,IAAI;KACvB,MAAM;MAAC,IAAI,CAACG,UAAU,GAAGC,SAAS;;IAEnC,IAAI,CAACC,wBAAwB,EAAE;EACjC;EAEAC,WAAWA,CAACC,EAAO;IACjB,IAAIC,UAAU,GAAG,IAAI,CAACL,UAAU;IAEhC,KAAI,IAAIM,IAAI,IAAID,UAAU,EAAC;MACzB,IAAGC,IAAI,CAACF,EAAE,IAAIA,EAAE,EAAC;QACf,IAAI,CAACJ,UAAU,GAAGK,UAAU,CAACE,MAAM,CAAED,IAAS,IAAKA,IAAI,CAACF,EAAE,KAAKA,EAAE,CAAC;;;IAGtEV,YAAY,CAACc,OAAO,CAAC,MAAM,EAAEV,IAAI,CAACW,SAAS,CAAC,IAAI,CAACT,UAAU,CAAC,CAAC;IAE7D,IAAI,CAACE,wBAAwB,EAAE;IAC/B,IAAI,CAACZ,eAAe,CAACoB,WAAW,CAACC,IAAI,CAAC,CAAC,CAAC;EAC1C;EAEAT,wBAAwBA,CAAA;IACtB,IAAIU,KAAK,GAAG,CAAC;IACb,KAAI,IAAIN,IAAI,IAAI,IAAI,CAACN,UAAU,EAAC;MAC9BY,KAAK,IAAIN,IAAI,CAACO,cAAc,GAACP,IAAI,CAACQ,QAAQ;;IAE5CF,KAAK,GAAGA,KAAK,GAAC,GAAG;IACjB,IAAI,CAACrB,cAAc,GAAG,MAAMqB,KAAK,CAACG,cAAc,CAAC,OAAO,EAAC;MACvDC,qBAAqB,EAAE,CAAC;MACxBC,qBAAqB,EAAE;KACxB,CAAC,EAAE;IACJ,IAAG,IAAI,CAAC1B,cAAc,IAAI,SAAS,EAAC;MAClC,IAAI2B,KAAK,GAAQN,KAAK,GAAG,EAAE;MAC3B,IAAI,CAACpB,WAAW,GAAG,MAAM0B,KAAK,CAACH,cAAc,CAAC,OAAO,EAAC;QACpDC,qBAAqB,EAAE,CAAC;QACxBC,qBAAqB,EAAE;OACxB,CAAC,EAAE;KACL,MAAM;MACL,IAAI,CAACzB,WAAW,GAAG,SAAS;;EAEhC;EAGAoB,KAAKA,CAACO,aAAqB;IACzB,IAAIP,KAAK,GAAGO,aAAa,GAAC,GAAG;IAC7B,OAAO,MAAMP,KAAK,CAACG,cAAc,CAAC,OAAO,EAAE;MACzCC,qBAAqB,EAAE,CAAC;MACxBC,qBAAqB,EAAE;KACxB,CAAC,EAAE;EACN;CACD;AA5DY7B,aAAa,GAAAgC,UAAA,EALzBjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,C,EACWnC,aAAa,CA4DzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}